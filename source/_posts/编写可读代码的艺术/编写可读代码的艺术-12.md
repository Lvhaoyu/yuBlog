---
title: 如何少写代码
date: 2020-01-29 18:20:19
tags:
  - 职业修养
categories:
  - 读书笔记
  - 编写可读代码的艺术
visible:
---

# 少写代码

最好读的代码就是没有代码。程序员要学会如何通过重用库，或者思考减少不必要的功能来让代码库保持精简节约。

## 不要费时间实现不需要的功能

当你开始一个项目，自然会很兴奋并且想着你希望实现的所有很酷的功能。但是程序员倾向于高估有多少功能真的对于他们的项目来讲是必不可少的。很多功能结果没有完成，或者没有用到，也可能只是让程序更复杂。

程序员还倾向于低估实现一个功能所要花的工夫。我们乐观地估计了实现一个粗糙原型所要花的时间，但是忘记了在将来代码库的维护、文件以及后增的“重量”所带来的额外时间。

## 质疑和拆分你的需求

不是所有的程序都需要运行得快，`100%`准确，并且能处理所有的输入。如果你真的仔细检查你的需求，有时你可以把它削减成一个简单的问题，只需要较少的代码。

例如一个定位器，需要找出距离当前用户最近的商店。你以为需求是对于给定任何的用户都需要实现对应的功能。实际上这个程序只在一个城镇使用，就不需要考虑那么多其他的问题。

怎么说“减少需求”和“解决更简单的问题”的好处都不为过。需求常常以微妙的方式互相影响。这意味着解决一半的问题可能只需要花四分之一的工夫。

## 保持小代码库

随着任何坐标系统的增长，把它粘合在一起所需的复杂度增长得更快。

![](00277.jpg)

最好的解决办法就是“让你的代码库越小，越轻量级越好”，就算你的项目在增长。那么你就要：

- 创建越多越好的“工具”代码来减少重复代码。

- 减少无用代码或没有用的功能。

- 让你的项目保持分开的子项目状态。

要舍得删除没用的代码，如果是独立的没有调用的函数，可以很简单的删除。如果是之前写过的贯穿整个系统的某个没有用上的功能，也要将整个功能删除。

## 熟悉周边的库

最好的建议是每隔一段时间，花 15 分钟来阅读标准库中的所有函数/模块/类型的名字。这包括 C++标准模板库（STL）、Java API、Python 内置的模块以及其他内容。

如果要实现某个功能，按照以下顺序查看有没有对应的现成的解决方案：

1. 使用的语言库
2. 项目中引入的代码库
3. 操作系统中的终端命令行工具（Linux）

在一个成熟的库中，每一行代码都代表相当大量的设计、调试、重写、文档、优化和测试。任何经受了这样达尔文进化过程一样的代码行就是很有价值的。这就是为什么重用库有这么大的好处，不仅节省时间，还少写了代码。

## 总结

本章是关于写越少代码越好的。每行新的代码都需要测试、写文档和维护。另外，代码库中的代码越多，它就越“重”，而且在其上开发就越难。

你可以通过以下方法避免编写新代码：

- 从项目中消除不必要的功能，不要过度设计。

- 重新考虑需求，解决版本最简单的问题，只要能完成工作就行。

- 经常性地通读标准库的整个 API，保持对它们的熟悉程度。

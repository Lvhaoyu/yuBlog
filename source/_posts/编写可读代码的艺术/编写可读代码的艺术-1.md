---
title: 如何起一个好的变量名
tags:
  - 职业修养
categories:
  - 读书笔记
  - 编写可读代码的艺术
date: 2019-12-17 22:58:23
---

> Programs must be written for people to read, and only incidentally for machines to execute.

这句话出自计算机业内鼎鼎大名的入门书籍《SICP》的作者，正如该作者所言，程序是写来让人读的，顺便可以在机器上运行。好的代码风格至关重要，代码本身就应该是易读的，如果代码很难懂，那么注释的作用其实也就是微乎其微。

《编写可读代码的艺术》探讨的是如何编写出别人可以用最短时间理解的代码。这个别人可以是团队中的其他人，也可以是几个月后的自己。本书分为四部分，渐进的教读者如何编写可读性高的代码。

## 第一章：代码应当易于理解

代码可读性与编写代码的其他目标（效率，架构，容易测试等）并不冲突。

### 编写代码的原则

> 代码应当易于理解

### 可读性基本定理

代码编写中最最重要的度量手段就是可读性，代码的写法应当使别人理解他所需要的时间最小化。这个理解意味着别人可以改动，找出代码中的缺陷，并且了解代码之间是如何交互的。

### 代码行数与可读性

使用更少的代码完成相同的功能也是代码编写好坏的主要度量手段，但是整个度量手段优先级低于代码的可读性。

## 第二章：把信息装到名字里

本章全章的主题都是探讨如何起一个更好的名称以及这个名称应当承载的信息等。在编写程序的过程中，在命名变量，函数，类，甚至前端中的类名和`id`，都需要开发者起名字，起名字的核心思想就是要**把信息装入名字中**，把名字当成一个小小的注释，让它承载更多的信息。

### 选择专业的词

这个==专业的词==指的是该词更能展示出该名字对应代码块实现的功能，可以理解为选择表示更加细节的词。

例如有一个函数是用来获取`web`页面信息的：

```javascript
function getPage(){
    ...
}
```

`get`这个词就用的不好，很空泛，只是表达了得到的意思，没有表示出在哪里得到，使用`fetch`或`download`表示更加具体，让人可以从名字看出该函数的具体功能。

#### 找到更具有表现力的词

一个词除了能精确表达代码的功能，还要有更好的表现力，表现力指的是可以很形象的表达功能的实现。例如`slice`方法，还有其他的数组方法都很有表现力，这里就需要善于使用同义词典，挑选合适的词汇。

同义词举例如下图：

![](Jietu20191218-115409.jpg)

### 避免使用 tmp，retval 这样泛泛的名字

`tmp`大部分用来命名一个中间变量，`retval`大部分用来命名一个返回值。当遇到想不出名字来使用这些名称时，使用可以描述这个实体或者目的的名字。

例如当不由自主使用这两个名字的时候，思考一下这两个名字中承载的是什么，或者该变量的目的是什么，就可以起出很优雅的名字。

`tmp`这个名字很特殊，有时他也会承载着意义，例如在交换两个变量的时候。该变量只应该用于生命周期短，并且临时性为其主要存在因素的变量。

#### 循环迭代器

循环迭代器中一般都会使用`i, j, k`等没有实际意义的名称，但是大家已经约定俗成了，使用这些名称只是单纯地表达一个迭代器中的循环或者索引。

尽量不要使用这些名称表示其他的含义，其次，如果有需要，例如索引和其对应的对象一起使用时，索引需要与其匹配，使用更加贴切的名称来命名。

#### 对于空泛名字的裁定

有些情况下空泛的名字也会有用处，如果要使用空泛的命名，需要有适合的理由。一定要多多思考，花几秒钟思考最适合的名字。

### 用具体的名字代替抽象的名字

在给变量，函数或者其他元素命名的时候，要把它们描述的更加具体，而不是更加抽象。

尽量在命名中展示出对应的功能，且更加具体。例如实现一个`ServerCanStart()`方法，该方法用来检测某个接口是否可用，换成`CanListenOnPort()`，就会变的更加具体。

### 为名字附带更多信息

一个变量名就像是一个小小的注释，当读者看到这个名字，里面的信息就会很快被发现，如果有重要的信息需要被人看到，就值得把额外的名字添加到名字中。

#### 带单位的值

如果变量是一个度量的话（时间或者字节数），最好把名字加上单位。

#### 附带其他的重要属性

除了度量，当变量有某些关键属性需要指明，要考虑以易读的方式把它加到名字里。

例如：

![](Jietu20191218-141259.jpg)

### 名字应该有多长

现代编译器已经有很全面的自动补全，所以长度的限制不是那么大，变量命名的长短主要取决于这个变量如何使用。

#### 在小的作用域里可以使用短的名字

因为在小的作用域中，一起有关信息都是一目了然的，读者可以很容易看到，所以可以用很短的名字。

但是如果在一个比较大的作用域，它的名字就需要包含足够的信息来表明含义。

#### 首字母缩略词和缩写

原则是如果可以保证团队中大多数可以理解这个词的含义，那就可以使用缩写，否则不要使用。

#### 丢掉没用的词

名字中的单词如果拿掉不影响含义和包含的对应信息，那就去掉多余的单词。

### 利用名字的格式传递含义

此规范由团队规定，例如类名使用`-`，`id`使用`_`。这样当看到对应格式的名称，可以很快辨认出该名称指的是什么。

## 总结

本章主题就是如何让读者通过名字获得大量信息。

- 使用专业的单词，例如`Get`和`Fetch`，`DownLoad`的选择
- 避免空泛的单词，例如`tmp`，`retval`，如要使用，需要有恰当的理由。
- 使用具体的名字更加细致的描述事物
- 给变量名加上细节，例如单位，重要信息。
- 为作用域大的名称采用更长的名字
- 有目的的采用某种格式来区分变量代表的不同含义

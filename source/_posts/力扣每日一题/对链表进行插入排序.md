---
title: 对链表进行插入排序
tags:
  - 基础算法
categories:
  - 算法
  - 每日一题
date: 2020-11-21 13:34:59
visible:
---


# 对链表进行插入排序

[题意](https://leetcode-cn.com/problems/insertion-sort-list/)是输入一个无序链表，根据插入排序的思想，将链表排序。

## 什么是插入排序

插入排序的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。

对数组中的数据进行插入排序很简单，因为大家平常生活中用的最多的就是插入排序，不涉及什么复杂的思想。

```js
const insertSort = (arr) => {
    let len = arr.length;
    for (let i = 1; i < len; i++) {
        let pre = i - 1;
        let curr = arr[i];
        while (pre >= 0 && curr < arr[pre]) {
            arr[pre + 1] = arr[pre]
            pre--;
        }
        arr[pre + 1] = curr;
    }
    return arr;
}
```

当然，插入排序算法的时间复杂度也很高，最好情况下，也就是有序数组，时间复杂度为`O(N)`。最坏情况自然就是`O(N^2)`了。空间复杂度都是没有开辟额外的空间，为`O(1)`。

## 链表的插入排序与数组的区别

链表插入排序的思想与数组是相同的，不同的就是操作方式。数组需要做大量的移动元素的操作，而链表只需要改变节点的指向就可以了。

## 解题思路

1. 判断链表是不是空，如果是，直接返回
2. 定义一个 dummy 节点，指向链表头节点，这样方便在链表头之前插入数据
3. 定义 sorted 为已经排序好的那部分，先指向头节点
4. 遍历当前节点，与 sorted 最后一个元素做比较，如果比它大，则放在后面，如果小，需要遍历整个 sorted 链表找到合适的插入位置
5. 最终返回 dummy 的 next 节点

## 代码编写

```js
const insertionSortList = head => {
    // 第一步判断链表是不是空
    if (!head) return head
    // 定义 dummy 节点，指向头节点
    let dummy = new ListNode(0)
    dummy.next = head
    // 定义 sorted 为排序好的链表，第一次指向头节点，curr 为需要向 sorted 插入的节点
    let sorted = head, curr = head.next
    // 进行插入排序流程
    while (curr != null) {
        // 如果当前节点值比排好序的都大，直接插入到最后
        if (sorted.val <= curr.val) {
            sorted = sorted.next
        } else {
            // 否则找到元素插入位置 prev 为需要插入的位置的前一个元素
            let prev = dummy;
            while (prev.next.val <= curr.val) {
                prev = prev.next
            }
            // 找到了之后，开始进行插入操作
            // 在将 curr 拿出来之前，要把 curr 后面的先接上
            sorted.next = curr.next
            // 将 curr 放到比他大的元素之前
            curr.next = prev.next
            // 再将 curr 放到比他小的元素之后
            prev.next = curr
        }
        // 更新 curr 继续向后遍历
        curr = sorted.next
    }
    return dummy.next
}
```

## 总结

本题主要是插入排序的思想，难点就是链表的操作较为繁琐。而且链表的题目都有一个特点，没有捷径可走。只能靠熟练度。
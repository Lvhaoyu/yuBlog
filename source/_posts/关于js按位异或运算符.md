---
title: 关于js按位异或运算符
tags:
  - web前端
  - js基础
categories:
  - 技术日志
date: 2019-08-31 16:10:28
---


每当接触一门新的编程语言，一般都是先学变量，之后运算符，最后`if-else`等条件语句。基本上一门编程语言的基础就这些了，而对于js运算符这方面的学习，我一般都是扫一眼就过去了，直到前两天我做了一道题，才意识到运算符的强大，题目的意思是这样的：

> Given an array, find the int that appears an odd number of times.
There will always be only one integer that appears an odd number of times.

题目大意就是以一个纯数字数组作为参数，找出该数组中出现奇数次的数字（该数字有且只有一个）

我首先写出了一种常规的解法：

```javascript
function findOdd(array) {
  for (let i = 0; i < array.length; i++) {
    const element = array[i]
    let counter = 0

    for (let j = 0; j < array.length; j++) {
      if (element === array[j]) counter++
    }

    if (counter % 2 !== 0) return element
  }
}
```

这个思路就很常规，设定一个计数器，遍历整个数组，最后通过计数器的判断来找出为奇数的元素。

然而，答案通过之后我自然而然的翻到了赞数最高的答案，发现这个答案只有一行代码：

```javascript
const finOdd = array => array.reduce((v,i)=> v ^ i)
```

我看到这个答案第一眼就很懵b，`^`运算符还能这样用？之后我去找了几篇资料，发现按位异或运算符真是大有用处。

## ^ 运算符

> 异或是一种基于二进制的位运算，用符号XOR或者 `^` 表示，其运算法则是对运算符两侧数的每一个二进制位，同值取0，异值取1。

其实就是0 + 0 = 0；0 + 1 = 1； 1 + 1 = 0，和不进位的加法很像。

### 满足的运算律
- 交换率
- 结合律
- 任何整数按位异或自己都是自己，按位异或0都是零，因为计算机都是二进制存储数据的嘛，转换一下就很好理解了

![](Jietu20190831-164530.jpg)

- 自反性，一个数连续按位异或两个相同的数会返回他自己本身

这个就是按照结合律，先算后边两个相同的就是0，之后根据第三条就可以得出来了。

![](Jietu20190831-164843.jpg)

### 应用

最主要的应用就是刚开始那一道题，这道题虽然解法很简单，就一行代码，但是问题在于怎么证明它是可行的。

- 基础：`Array.reduce()`方法
- 目的：找出个数为奇数的元素
- 思路: 根据按位异或运算符的性质3和性质1，偶数个数无论有多少个，其实最后异或的结果只有一个（就是它本身），就可以将他们全部异或，假设数组是这样的`[1,1,2,3,2,3,4,4,5,5,5]`，可以将这些数字分为n组（n肯定是偶数）一样的集合，出现偶数次的数字只可能被分完或者剩下偶数个数字，根据性质4自反性，不影响计算，将他们全部异或后剩下的就是出现次数为奇数的那个数。

类似的题目都可以这样实现。

第二个应用就是可以交换两个变量的值：

![](Jietu20190831-171340.jpg)

当然，还有更简单的方法：

```javascript
b = a + 0 * (a = b);
```

第三个就是可以用来判断一个数字是不是整数：
> 将任一整数值`x`与`0`进行按位或或者异或操作，其结果都是`x`。如果该值为小数的话，会向下取整。将任一数值`x`与`-1`进行异或操作，其结果为`~x`(`~`表示取反)。

其他的应用就涉及到数据加密传输等。

## 总结

编程语言的位运算符其实就是根据计算机中数据的存储方式而生的一种运算方法，根据不同运算符的不同功能，可以做不同的运算与应用。

内容总结：

- 异或运算符概念
- 异或运算符运算律
- 异或运算符应用



